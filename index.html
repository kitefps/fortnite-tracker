<script>
    const API_KEY = '7a615408-c81c-4b29-84c9-ee8c2973257e'; 
    const accountId = '63989098791c49129e160f64c12579da';
    const QUAL_MARK = 325; // Your target points
    const TOTAL_MATCHES = 10; // Change this if the tourney has more/less matches

    async function fetchTournamentProgress() {
        const matchList = document.getElementById('matchList');
        matchList.innerHTML = '<li>Updating Tournament Data...</li>';

        try {
            // Note: In a real tourney, you'd use the /v1/events/window endpoint
            // For now, we fetch your latest stats to simulate the point pull
            const resp = await fetch(`https://fortnite-api.com/v2/stats/br/v2/${accountId}`, {
                headers: { 'Authorization': API_KEY }
            });
            const result = await resp.json();

            if (result.status === 200) {
                // SIMULATED CALCULATION 
                // In a real event, 'currentPoints' would come from the Event API
                let currentPoints = result.data.stats.all.overall.score || 0; 
                let matchesPlayed = result.data.stats.all.overall.matches || 0;
                
                updateQualCalc(currentPoints, matchesPlayed);
            }
        } catch (e) {
            matchList.innerHTML = `<li style="color:red">Error: ${e.message}</li>`;
        }
    }

    function updateQualCalc(points, played) {
        const matchList = document.getElementById('matchList');
        const remainingMatches = TOTAL_MATCHES - played;
        const pointsNeeded = QUAL_MARK - points;
        const pointsPerGame = pointsNeeded > 0 ? (pointsNeeded / remainingMatches).toFixed(1) : 0;

        matchList.innerHTML = `
            <div class="match-item">
                <h3>Tournament Status</h3>
                <p><strong>Current Points:</strong> ${points}</p>
                <p><strong>Matches Left:</strong> ${remainingMatches}</p>
                <hr>
                <p><strong>Points to Qual:</strong> ${pointsNeeded <= 0 ? "QUALIFIED!" : pointsNeeded}</p>
                <p><strong>Required Avg/Game:</strong> ${pointsNeeded > 0 ? pointsPerGame : '0'} pts</p>
            </div>
        `;
    }

    // Refresh every 2 minutes
    setInterval(fetchTournamentProgress, 120000);
    fetchTournamentProgress();
</script>
